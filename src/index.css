@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=DM+Serif+Display&display=swap');

/* ===========================
   NProgress Route Transition Bar
   =========================== */
#nprogress {
  pointer-events: none;
}

#nprogress .bar {
  background: var(--color-primary);
  position: fixed;
  z-index: 99999;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
}

#nprogress .peg {
  display: block;
  position: absolute;
  right: 0px;
  width: 100px;
  height: 100%;
  box-shadow: 0 0 10px var(--color-primary), 0 0 5px var(--color-primary);
  opacity: 1;
  transform: rotate(3deg) translate(0px, -4px);
}

/* ===========================
   Island Depths — Default (Dark)
   Gold primary, editorial authority, content-first
   =========================== */
:root {
  /* Primary: Gold — brand color, CTAs, accent */
  --color-primary: #D9A765;
  --color-primary-muted: rgba(217, 167, 101, 0.12);
  --color-primary-glow: rgba(217, 167, 101, 0.25);
  --color-rating: #6BB384;
  /* Gold accents (same family as primary in dark) */
  --color-accent-gold: #D9A765;
  --color-accent-gold-muted: rgba(217, 167, 101, 0.15);
  --color-link-secondary: #D9A765;
  --color-accent-orange: #E07856;
  --color-accent-yellow: #F5B731;
  /* Text — warm cream on dark */
  --color-text-primary: #F5F1E8;
  --color-text-secondary: #B8A99A;
  --color-text-tertiary: #7D7168;
  /* Surfaces — deep navy */
  --color-bg: #0F1720;
  --color-surface: #1A2632;
  --color-surface-elevated: #223040;
  --color-divider: rgba(217, 167, 101, 0.10);
  /* Category strip */
  --color-category-strip: #1A2632;
  /* Cards */
  --color-card: #1A2632;
  --color-card-hover: #223040;
  --color-card-border: rgba(217, 167, 101, 0.2);
  --color-medal-gold: #D9A765;
  --color-medal-silver: #A8B5BF;
  --color-medal-bronze: #C4855C;
  --color-danger: #EF4444;
  --color-success: #6BB384;
  --color-success-light: #0D2818;
  --color-success-muted: rgba(107, 179, 132, 0.10);
  --color-success-border: rgba(107, 179, 132, 0.30);
  --color-muted: #6B7680;
  --color-text-tagline: #B8A99A;
  --color-text-on-primary: #0F1720;

  /* Semantic status colors */
  --color-emerald: #10B981;
  --color-emerald-light: #22C55E;
  --color-red: #EF4444;
  --color-red-light: #F87171;
  --color-amber: #F59E0B;
  --color-amber-light: #FBBF24;
  --color-amber-dark: #92400E;
  --color-orange: #F97316;
  --color-lime: #84CC16;
  --color-yellow: #EAB308;
  --color-green-deep: #5BA97A;
  --color-green-dark: #059669;
  --color-blue: #3B82F6;
  --color-blue-light: #60A5FA;
  --color-purple: #9333EA;

  /* Photo tier badges */
  --color-tier-featured: #F59E0B;
  --color-tier-community: #3B82F6;
  --color-tier-hidden: #6B7280;

  /* Glow effects */
  --glow-primary: 0 0 16px rgba(217, 167, 101, 0.20);
  --glow-gold: 0 0 12px rgba(217, 167, 101, 0.25);

  /* Focus ring */
  --focus-ring: 0 0 0 3px rgba(217, 167, 101, 0.25);

  /* Spacing rhythm */
  --space-section: 24px;
  --space-card: 16px;
  --space-gap: 12px;

  /* Card radii */
  --card-radius-sm: 12px;
  --card-radius-md: 16px;
  --card-radius-lg: 20px;

  /* Score pill background tints */
  --color-score-great-bg: rgba(107, 179, 132, 0.15);
  --color-score-good-bg: rgba(107, 179, 132, 0.10);
  --color-score-mid-bg: rgba(245, 158, 11, 0.12);
  --color-score-low-bg: rgba(239, 68, 68, 0.10);
}

/* ===========================
   Appetite Theme (Light Mode Toggle)
   Warm gold on off-white
   =========================== */
[data-theme="light"] {
  --color-primary: #C48A12;
  --color-primary-muted: rgba(196, 138, 18, 0.10);
  --color-primary-glow: rgba(196, 138, 18, 0.20);
  --color-rating: #16A34A;
  --color-accent-gold: #C48A12;
  --color-accent-gold-muted: rgba(196, 138, 18, 0.12);
  --color-link-secondary: #C48A12;
  --color-accent-yellow: #C48A12;
  --color-accent-orange: #E07856;
  /* Text — near-black on warm white */
  --color-text-primary: #1A1A1A;
  --color-text-secondary: #555555;
  --color-text-tertiary: #999999;
  /* Surfaces — warm off-white */
  --color-bg: #F5F2EE;
  --color-surface: #FAF8F5;
  --color-surface-elevated: #FFFFFF;
  --color-divider: #E5E0DB;
  --color-category-strip: #F2CDBC;
  /* Cards */
  --color-card: #FFFFFF;
  --color-card-hover: #F9F7F5;
  --color-card-border: #1A1A1A;
  --color-medal-gold: #C48A12;
  --color-medal-silver: #9EAAB2;
  --color-medal-bronze: #B07340;
  --color-green-deep: #1A7A42;
  --color-danger: #DC2626;
  --color-success: #16A34A;
  --color-success-light: #F0FFF4;
  --color-success-muted: rgba(22, 163, 74, 0.10);
  --color-success-border: rgba(22, 163, 74, 0.30);
  --color-muted: #999999;
  --color-text-tagline: #999999;
  --color-text-on-primary: #1A1A1A;
  --glow-primary: 0 0 10px rgba(196, 138, 18, 0.15);
  --glow-gold: 0 0 8px rgba(196, 138, 18, 0.20);
  --focus-ring: 0 0 0 3px rgba(196, 138, 18, 0.25);

  /* Score pill background tints (light) */
  --color-score-great-bg: rgba(22, 163, 74, 0.12);
  --color-score-good-bg: rgba(22, 163, 74, 0.08);
  --color-score-mid-bg: rgba(245, 158, 11, 0.10);
  --color-score-low-bg: rgba(239, 68, 68, 0.08);
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Support for dynamic viewport height on mobile */
    height: 100%;
  }

  body {
    @apply m-0;
    min-height: 100%;
    min-height: 100dvh; /* Dynamic viewport height - accounts for mobile browser chrome */
    background: var(--color-surface);
    color: var(--color-text-primary);
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    overscroll-behavior-y: none;
  }

  h1, h2 {
    font-family: 'DM Serif Display', Georgia, serif;
    font-weight: 400;
  }

  h3 {
    font-weight: 700;
  }
}

@layer components {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .smooth-scroll {
    scroll-behavior: smooth;
  }

  .glass-header {
    background: rgba(13, 27, 34, 0.95);
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
  }

  [data-theme="light"] .glass-header {
    background: rgba(232, 212, 200, 0.95);
  }

  .card-elevated {
    @apply rounded-2xl transition-all duration-300;
    background: var(--color-card);
    border: 1px solid rgba(217, 167, 101, 0.1);
    box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.4);
  }

  .card-elevated:hover {
    background: var(--color-card-hover);
    border-color: rgba(224, 120, 86, 0.25);
    box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.5), 0 0 20px rgba(217, 167, 101, 0.1);
    transform: translateY(-2px);
  }

  [data-theme="light"] .card-elevated {
    border: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  }

  [data-theme="light"] .card-elevated:hover {
    border-color: transparent;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  }

  .card-subtle {
    @apply rounded-xl;
    background: var(--color-card);
    border: 2px solid var(--color-card-border, #1A1A1A);
  }

  .image-zoom {
    @apply transition-transform duration-500 ease-out;
  }

  .image-zoom:hover {
    transform: scale(1.05);
  }

  /* TopBar - Subtle brand anchor in safe-area region */
  .top-bar {
    position: relative;
    width: 100%;
    background: color-mix(in srgb, var(--color-primary) 6%, var(--color-bg));
    padding-top: env(safe-area-inset-top, 0px);
    border-bottom: 1px solid rgba(217, 167, 101, 0.12);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  }

  [data-theme="light"] .top-bar {
    background: #FFFFFF;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  }

  .top-bar-content {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 40px;
  }

  .top-bar-icon {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 18px;
    height: 18px;
    color: var(--color-primary);
    opacity: 0.7;
  }

  /* Score pill — consistent rating display */
  .score-pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4px 10px;
    border-radius: 8px;
    font-weight: 800;
    font-size: 15px;
    letter-spacing: -0.02em;
    min-width: 44px;
    font-variant-numeric: tabular-nums;
  }

  /* Hero card — full-width featured content */
  .card-hero {
    border-radius: var(--card-radius-lg);
    overflow: hidden;
    background: var(--color-card);
    box-shadow: 0 8px 32px -8px rgba(0, 0, 0, 0.4);
  }

  [data-theme="light"] .card-hero {
    box-shadow: 0 8px 32px -8px rgba(0, 0, 0, 0.12);
  }

  /* Standard card — bordered content container */
  .card-standard {
    border-radius: var(--card-radius-md);
    overflow: hidden;
    background: var(--color-card);
    border: 1px solid var(--color-divider);
  }

  /* Section label — uppercase category headers */
  .section-label {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--color-text-tertiary);
  }

  /* WelcomeSplash - Multi-step onboarding for first-time visitors */
  .welcome-splash {
    position: fixed;
    inset: 0;
    z-index: 99999;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(145deg, #162B35 0%, #0D1B22 50%, #080F14 100%);
    opacity: 1;
    transition: opacity 0.4s ease-out;
  }

  [data-theme="light"] .welcome-splash {
    background: linear-gradient(145deg, #FFFFFF 0%, #F7F4F1 50%, #F0ECE8 100%);
  }

  .welcome-splash--fading {
    opacity: 0;
  }

  .welcome-splash__content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 2rem;
    max-width: 380px;
    width: 100%;
  }

  /* Progress dots */
  .welcome-splash__progress {
    display: flex;
    gap: 8px;
    margin-bottom: 2.5rem;
  }

  .welcome-splash__dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-divider);
    border: none;
    padding: 0;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .welcome-splash__dot--active {
    width: 24px;
    border-radius: 4px;
    background: var(--color-primary);
  }

  /* Slide content with animation */
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInReverse {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .welcome-splash__slide {
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: slideIn 0.35s ease-out;
  }

  .welcome-splash__slide--prev {
    animation: slideInReverse 0.35s ease-out;
  }

  /* Emoji icon */
  .welcome-splash__icon {
    width: 88px;
    height: 88px;
    border-radius: 50%;
    background: linear-gradient(145deg, var(--color-primary), #f77f00);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.75rem;
    box-shadow: var(--glow-primary);
  }

  .welcome-splash__emoji {
    font-size: 40px;
  }

  /* Typography */
  .welcome-splash__headline {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 0.5rem;
    line-height: 1.2;
  }

  .welcome-splash__subhead {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: 1rem;
  }

  .welcome-splash__description {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    line-height: 1.5;
    margin-bottom: 2.5rem;
    max-width: 300px;
  }

  /* Navigation buttons */
  .welcome-splash__nav {
    display: flex;
    gap: 12px;
    width: 100%;
    max-width: 300px;
  }

  .welcome-splash__btn {
    flex: 1;
    padding: 14px 24px;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
  }

  .welcome-splash__btn--primary {
    background: var(--color-primary);
    color: var(--color-text-on-primary);
  }

  .welcome-splash__btn--primary:hover {
    opacity: 0.9;
    transform: translateY(-1px);
  }

  .welcome-splash__btn--primary:active {
    transform: scale(0.98);
  }

  .welcome-splash__btn--secondary {
    background: var(--color-surface-elevated);
    color: var(--color-text-secondary);
    border: 1px solid var(--color-divider);
  }

  .welcome-splash__btn--secondary:hover {
    background: var(--color-card-hover);
  }

  .welcome-splash__btn--skip {
    background: transparent;
    color: var(--color-text-tertiary);
  }

  .welcome-splash__btn--skip:hover {
    color: var(--color-text-secondary);
  }

  /* Counter */
  .welcome-splash__counter {
    margin-top: 1.5rem;
    font-size: 0.75rem;
    color: var(--color-text-tertiary);
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .welcome-splash {
      transition: none;
    }
    .welcome-splash__slide {
      animation: none;
    }
    .welcome-splash__dot {
      transition: none;
    }
  }
}

@layer utilities {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Tap target - pressed state for buttons */
  .tap-target {
    @apply transition-all duration-150;
  }
  .tap-target:active {
    transform: scale(0.95);
    opacity: 0.8;
  }

  /* Image placeholder background while loading */
  .image-placeholder {
    background: var(--color-divider);
  }

  /* Image fade-in on load */
  .image-fade-in {
    opacity: 0;
    transition: opacity 0.3s ease-out;
  }
  .image-fade-in.loaded {
    opacity: 1;
  }

  /* Dynamic viewport height - accounts for mobile browser chrome (address bar) */
  .min-h-dvh {
    min-height: 100vh; /* Fallback for older browsers */
    min-height: 100dvh;
  }

  .h-dvh {
    height: 100vh; /* Fallback */
    height: 100dvh;
  }

  .touch-scroll {
    overflow-y: auto;
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .stagger-item {
    opacity: 0;
    animation: fadeInUp 0.4s ease-out forwards;
  }

  .stagger-item:nth-child(1) { animation-delay: 0ms; }
  .stagger-item:nth-child(2) { animation-delay: 50ms; }
  .stagger-item:nth-child(3) { animation-delay: 100ms; }
  .stagger-item:nth-child(4) { animation-delay: 150ms; }
  .stagger-item:nth-child(5) { animation-delay: 200ms; }
  .stagger-item:nth-child(6) { animation-delay: 250ms; }
  .stagger-item:nth-child(7) { animation-delay: 300ms; }
  .stagger-item:nth-child(8) { animation-delay: 350ms; }
  .stagger-item:nth-child(9) { animation-delay: 400ms; }
  .stagger-item:nth-child(10) { animation-delay: 450ms; }
  .stagger-item:nth-child(11) { animation-delay: 500ms; }
  .stagger-item:nth-child(12) { animation-delay: 550ms; }

  /* Subtle press feedback — gentle scale down */
  .card-press {
    transition: transform 0.1s ease;
  }
  .card-press:active {
    transform: scale(0.98) !important;
  }
  .card-press-hero {
    transition: transform 0.1s ease;
  }
  .card-press-hero:active {
    transform: scale(0.98) !important;
  }

  .animate-shimmer {
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.08) 50%, transparent 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  [data-theme="light"] .animate-shimmer {
    background: linear-gradient(90deg, transparent 0%, rgba(0, 0, 0, 0.04) 50%, transparent 100%);
    background-size: 200% 100%;
  }

  /* Warm text shadow for hero headlines */
  .text-shadow-warm {
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  /* Gradient hero background */
  .gradient-hero {
    background: var(--color-bg);
  }

  /* Search input focus ring */
  .glow-search:focus-within {
    box-shadow: 0 0 0 2px var(--color-primary);
    border-color: var(--color-primary) !important;
  }

  /* Rating glow for high scores */
  .glow-rating-high {
    text-shadow: 0 0 12px rgba(107, 179, 132, 0.5);
  }

  /* Gold text glow */
  .glow-gold-text {
    text-shadow: 0 0 16px rgba(217, 167, 101, 0.4), 0 0 32px rgba(217, 167, 101, 0.15);
  }

  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    --tw-ring-color: var(--color-primary);
  }

  /* Rating slider thumb uses primary color */
  .rating-slider::-webkit-slider-thumb {
    background: var(--color-primary) !important;
  }
  .rating-slider::-webkit-slider-thumb:hover {
    background: var(--color-primary) !important;
    filter: brightness(0.9);
  }
  .rating-slider::-moz-range-thumb {
    background: var(--color-primary) !important;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Slide down from top (for banners) */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slideDown {
  animation: slideDown 0.3s ease-out forwards;
}

/* Modal animations */
@keyframes modalSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes modalSlideDown {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
}

@keyframes backdropFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes backdropFadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animate-modal-slide-up {
  animation: modalSlideUp 0.25s ease-out forwards;
}

.animate-modal-slide-down {
  animation: modalSlideDown 0.2s ease-in forwards;
}

.animate-backdrop-fade-in {
  animation: backdropFadeIn 0.2s ease-out forwards;
}

.animate-backdrop-fade-out {
  animation: backdropFadeOut 0.15s ease-in forwards;
}

/* Vote success animation */
@keyframes voteSuccess {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

.animate-vote-success {
  animation: voteSuccess 0.3s ease-out;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out forwards;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* ===========================
   Celebration Keyframes
   =========================== */

@keyframes confettiFall {
  0% {
    opacity: 1;
    transform: translateY(0) translateX(0) rotate(0deg) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(calc(100vh + 50px)) translateX(var(--confetti-drift, 30px)) rotate(var(--confetti-spin, 720deg)) scale(0.5);
  }
}

@keyframes celebrationPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

@keyframes glowBreathe {
  0%, 100% {
    box-shadow: 0 0 4px rgba(245, 158, 11, 0.3);
  }
  50% {
    box-shadow: 0 0 12px rgba(245, 158, 11, 0.6), 0 0 24px rgba(245, 158, 11, 0.2);
  }
}

@keyframes badgeBounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    opacity: 1;
    transform: scale(1.15);
  }
  70% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes rankFadeOut {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.5);
  }
}

.animate-confetti-fall {
  animation: confettiFall var(--confetti-duration, 2s) ease-out forwards;
  animation-delay: var(--confetti-delay, 0s);
}

.animate-celebration-pulse {
  animation: celebrationPulse 2s ease-in-out infinite;
}

.animate-glow-breathe {
  animation: glowBreathe 2s ease-in-out infinite;
}

.animate-badge-bounce-in {
  animation: badgeBounceIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.animate-rank-fade-out {
  animation: rankFadeOut 0.4s ease-in forwards;
}

@keyframes crumbFall {
  0% {
    opacity: 1;
    transform: translateY(0) translateX(0) rotate(0deg);
  }
  100% {
    opacity: 0;
    transform: translateY(40px) translateX(calc(var(--fall-direction, 1) * 20px)) rotate(180deg);
  }
}

.animate-crumb-fall {
  animation: crumbFall 0.8s ease-out forwards;
  transform-origin: center;
}

/* ===========================
   Rarity System Animations
   =========================== */

@keyframes rarityGlow {
  0%, 100% {
    filter: drop-shadow(0 0 4px var(--rarity-color, #3B82F6));
  }
  50% {
    filter: drop-shadow(0 0 12px var(--rarity-color, #3B82F6)) drop-shadow(0 0 24px color-mix(in srgb, var(--rarity-color, #3B82F6) 40%, transparent));
  }
}

@keyframes legendaryShimmer {
  0% {
    filter: drop-shadow(0 0 8px #F59E0B) brightness(1);
  }
  50% {
    filter: drop-shadow(0 0 16px #F59E0B) drop-shadow(0 0 32px rgba(245, 158, 11, 0.4)) brightness(1.1);
  }
  100% {
    filter: drop-shadow(0 0 8px #F59E0B) brightness(1);
  }
}

.animate-rarity-glow {
  animation: rarityGlow 2.5s ease-in-out infinite;
}

.animate-legendary-shimmer {
  animation: legendaryShimmer 2s ease-in-out infinite;
}

/* ===========================
   Photo Upload Components
   =========================== */

.photo-upload-container {
  margin-top: 16px;
}

.photo-upload-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 2px dashed var(--color-divider);
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.photo-upload-btn:hover:not(:disabled) {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-primary-muted);
}

.photo-upload-btn:disabled {
  cursor: not-allowed;
  opacity: 0.7;
}

.photo-upload-btn-compact {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  background: var(--color-surface);
  border: 1px solid var(--color-divider);
  border-radius: 50%;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.photo-upload-btn-compact:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-muted);
}

.photo-upload-btn-compact:disabled {
  cursor: not-allowed;
  opacity: 0.7;
}

.upload-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid var(--color-divider);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.photo-upload-error-container {
  margin-top: 12px;
  text-align: center;
}

.photo-upload-error {
  margin: 0 0 8px 0;
  font-size: 13px;
  color: var(--color-danger);
  line-height: 1.4;
}

.photo-upload-retry-btn {
  padding: 6px 16px;
  background: transparent;
  border: 1px solid var(--color-primary);
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-primary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.photo-upload-retry-btn:hover {
  background: var(--color-primary);
  color: var(--color-text-on-primary);
}

/* Photo Upload Confirmation */
.photo-upload-confirmation {
  text-align: center;
  padding: 16px 0;
}

.photo-upload-confirmation .photo-preview {
  position: relative;
  width: 120px;
  height: 120px;
  margin: 0 auto 16px;
  border-radius: 12px;
  overflow: hidden;
}

.photo-upload-confirmation .photo-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.photo-upload-confirmation .photo-preview .checkmark {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 28px;
  height: 28px;
  background: #22c55e;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  font-weight: bold;
}

.photo-upload-confirmation h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
  color: var(--color-text-primary);
}

.photo-upload-confirmation p {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin-bottom: 16px;
}

.photo-upload-confirmation .confirmation-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-bottom: 12px;
}

.photo-upload-confirmation .btn-primary {
  padding: 10px 24px;
  background: var(--color-primary);
  color: var(--color-text-on-primary);
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.photo-upload-confirmation .btn-primary:hover {
  filter: brightness(0.9);
}

.photo-upload-confirmation .btn-secondary {
  padding: 10px 24px;
  background: var(--color-surface);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-divider);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.photo-upload-confirmation .btn-secondary:hover {
  background: var(--color-divider);
}

.photo-upload-confirmation .hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-bottom: 0;
}

/* Photo tier badge */
.photo-tier-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  background: color-mix(in srgb, var(--tier-color) 15%, var(--color-bg));
  border: 1px solid color-mix(in srgb, var(--tier-color) 30%, var(--color-bg));
  border-radius: 20px;
  margin: 8px 0 12px;
}

.photo-tier-badge .tier-icon {
  font-size: 16px;
}

.photo-tier-badge .tier-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--tier-color);
}

.photo-upload-confirmation .tier-description {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 8px;
  line-height: 1.4;
}

.photo-upload-confirmation .tier-tip {
  font-size: 12px;
  color: var(--color-primary);
  background: var(--color-primary-muted);
  padding: 8px 12px;
  border-radius: 8px;
  margin-bottom: 12px;
}

.photo-upload-confirmation .photo-info-link {
  background: none;
  border: none;
  font-size: 12px;
  color: var(--color-text-tertiary);
  cursor: pointer;
  padding: 4px 8px;
  margin-bottom: 8px;
  transition: color 0.2s ease;
}

.photo-upload-confirmation .photo-info-link:hover {
  color: var(--color-text-secondary);
}

.photo-upload-confirmation .photo-info-content {
  background: var(--color-surface);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
  text-align: left;
}

.photo-upload-confirmation .photo-info-content ul {
  margin: 0;
  padding-left: 20px;
}

.photo-upload-confirmation .photo-info-content li {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin-bottom: 6px;
  line-height: 1.4;
}

.photo-upload-confirmation .photo-info-content li:last-child {
  margin-bottom: 0;
}

.photo-upload-confirmation .rate-prompt {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin-bottom: 12px;
}

/* ===========================
   Dish Photo Gallery Components
   =========================== */

.dish-hero-photo {
  position: relative;
  width: 100%;
  aspect-ratio: 4 / 3;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 16px;
}

.dish-hero-photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.photo-badge {
  position: absolute;
  bottom: 8px;
  left: 8px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  backdrop-filter: blur(4px);
}

.photo-badge.restaurant {
  background: var(--color-primary);
}

.community-photos {
  margin-bottom: 16px;
}

.community-photos h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-bottom: 10px;
}

.photo-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.photo-grid-item {
  aspect-ratio: 1;
  border-radius: 8px;
  overflow: hidden;
  background: var(--color-surface);
  cursor: pointer;
}

.photo-grid-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.2s ease;
}

.photo-grid-item:hover img {
  transform: scale(1.05);
}

.dish-hero-photo {
  cursor: pointer;
}

.see-all-photos-btn {
  display: block;
  width: 100%;
  margin-top: 10px;
  padding: 8px;
  background: transparent;
  border: 1px solid rgba(217, 167, 101, 0.2);
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-link-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.see-all-photos-btn:hover {
  background: var(--color-accent-gold-muted);
  color: var(--color-accent-gold);
  border-color: rgba(217, 167, 101, 0.4);
}

/* Photo Lightbox */
.photo-lightbox {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10000;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  cursor: pointer;
}

.photo-lightbox img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 8px;
}

.lightbox-close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;
}

.lightbox-close:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ===========================
   Performance Utilities
   =========================== */

/* content-visibility for long lists - skip rendering off-screen items */
.dish-card-virtualized {
  content-visibility: auto;
  contain-intrinsic-size: 0 420px;
}

/* Note: .browse-card-virtualized removed - content-visibility was causing card content clipping */

/* ===========================
   Accessibility: Reduced Motion
   =========================== */

@media (prefers-reduced-motion: reduce) {
  /* Disable all animations globally */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Keep opacity for stagger items so they're visible */
  .stagger-item {
    opacity: 1;
  }

  /* Disable specific animation classes */
  .animate-fadeIn,
  .animate-fade-in-up,
  .animate-slide-up,
  .animate-shimmer,
  .animate-crumb-fall,
  .animate-pulse,
  .animate-spin,
  .animate-bounce,
  .animate-confetti-fall,
  .animate-celebration-pulse,
  .animate-glow-breathe,
  .animate-badge-bounce-in,
  .animate-rank-fade-out,
  .animate-rarity-glow,
  .animate-legendary-shimmer {
    animation: none;
  }

  /* Disable hover transforms */
  .card-elevated:hover,
  .image-zoom:hover {
    transform: none;
  }
}

/* ===========================
   Accessibility: Focus Styles
   =========================== */

/* Global focus-visible styles for keyboard navigation */
:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Remove default focus for mouse users, keep for keyboard */
:focus:not(:focus-visible) {
  outline: none;
}

/* Enhanced focus for buttons and interactive elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--color-accent-gold);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(217, 167, 101, 0.2);
}

/* Override focus styles for inputs inside styled containers (they handle their own focus) */
input.outline-none:focus-visible {
  outline: none;
  box-shadow: none;
}

/* ===========================
   Dish Photo — Homepage Cards
   =========================== */

/* Photo shimmer placeholder — warm pulse while image loads */
@keyframes photoShimmer {
  0% { opacity: 0.4; }
  50% { opacity: 0.7; }
  100% { opacity: 0.4; }
}

.photo-shimmer {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  background: var(--color-bg);
  animation: photoShimmer 1.5s ease-in-out infinite;
}

/* Dish photo — gradient fade from transparent (left) to visible (right) */
.dish-photo-fade {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 55%;
  object-fit: cover;
  object-position: center;
  mask-image: linear-gradient(to right, transparent 0%, black 40%);
  -webkit-mask-image: linear-gradient(to right, transparent 0%, black 40%);
}
